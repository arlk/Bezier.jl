using Bezier
using Base.Test

@testset "Bezier" begin
    pts = [0.0 1.0 2.0 3.0; 0.0 -1.0 2.0 0.0]
    t = 0.0:0.25:1.0
    @test all(evalbezier(pts, t) .≈ [0.0 0.75 1.5 2.25 3.0; 0.0 -0.140625 0.375 0.703125 0.0])
    t = 0.5
    β₁, β₂ = subdivide(pts, t)
    @test all(β₁ .≈ [0.0 0.5 1.0 1.5; 0.0 -0.5 0.0 0.375])
    @test all(β₂ .≈ [1.5 2.0 2.5 3.0; 0.375 0.75 1.0 0.0])


    pts = [0.0 1.0 2.0 3.0; 0.0 -1.0 2.0 0.0; 0.0 2.0 -1.0 -1.0]
    t = 0.0:0.5:1.0
    @test all(evalbezier(pts, t) .≈ [0.0 1.5 3.0; 0.0 0.375 0.0; 0.0 0.25 -1.0])
    t = 0.25
    β₁, β₂ = subdivide(pts, t)
    @test all(β₁ .≈ [0.0 0.25 0.5 0.75; 0.0 -0.25 -0.25 -0.140625; 0.0 0.5 0.6875 0.6875])
    @test all(β₂ .≈ [0.75 1.5 2.25 3.0; -0.140625 0.1875 1.5 0.0; 0.6875 0.6875 -1.0 -1.0])
end
